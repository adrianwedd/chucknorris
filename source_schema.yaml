# source_schema.yaml
# Defines the normalized metadata structure for all ingested prompt sources.
# All extraction scripts MUST conform to this schema to ensure data integrity.

version: 1.0

source_types:
  - GITHUB_REPO
  - HUGGINGFACE_SPACE
  - ARXIV_PAPER
  - DISCORD_CHANNEL
  - MANUAL_SUBMISSION

trust_levels:
  - UNVERIFIED       # Raw, un-audited source
  - COMMUNITY_VETTED # Reviewed by at least one human contributor
  - CORE_MAINTAINER  # Reviewed and approved by a core maintainer
  - SELF_GENERATED   # Generated by an agent within this system

schema:
  type: object
  properties:
    source_id:
      type: string
      description: "Unique identifier for the source (e.g., github_user/repo_name)."
      required: true
    source_type:
      type: string
      description: "The type of the source, must be one of the defined source_types."
      enum: [GITHUB_REPO, HUGGINGFACE_SPACE, ARXIV_PAPER, DISCORD_CHANNEL, MANUAL_SUBMISSION]
      required: true
    source_url:
      type: string
      description: "The direct URL to the source."
      required: true
    last_ingested_at:
      type: string
      format: date-time
      description: "The ISO 8601 timestamp of the last ingestion."
      required: true
    trust_level:
      type: string
      description: "The trust level of the source, must be one of the defined trust_levels."
      enum: [UNVERIFIED, COMMUNITY_VETTED, CORE_MAINTAINER, SELF_GENERATED]
      required: true
    tags:
      type: array
      items:
        type: string
      description: "A list of tags describing the source content (e.g., jailbreak, red-teaming, DAN)."
      required: false
    notes:
      type: string
      description: "Optional notes or comments about the source."
      required: false
